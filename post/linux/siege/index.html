<!DOCTYPE html>
<html lang="zh-cn">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>压力测试工具 Siege 安装与使用 - HuangYefei&#39;s Blog</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="honour" />
  <meta name="description" content="Siege 是Linux/Unix下的一个WEB系统的压力测试工具。 本文记录如何安装 Siege 以及基本使用方法介绍

" />

  <meta name="keywords" content="Hugo, theme, even" />






<meta name="generator" content="Hugo 0.40.3" />


<link rel="canonical" href="https://yefeihonours.github.io/post/linux/siege/" />

<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">




<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>


<link href="/dist/even.min.css?v=3.1.1" rel="stylesheet">





<meta property="og:title" content="压力测试工具 Siege 安装与使用" />
<meta property="og:description" content="Siege 是Linux/Unix下的一个WEB系统的压力测试工具。


本文记录如何安装 Siege 以及基本使用方法介绍

" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://yefeihonours.github.io/post/linux/siege/" />



<meta property="article:published_time" content="2018-06-30T12:00:00&#43;08:00"/>

<meta property="article:modified_time" content="2018-06-30T12:00:00&#43;08:00"/>











<meta itemprop="name" content="压力测试工具 Siege 安装与使用">
<meta itemprop="description" content="Siege 是Linux/Unix下的一个WEB系统的压力测试工具。


本文记录如何安装 Siege 以及基本使用方法介绍

">


<meta itemprop="datePublished" content="2018-06-30T12:00:00&#43;08:00" />
<meta itemprop="dateModified" content="2018-06-30T12:00:00&#43;08:00" />
<meta itemprop="wordCount" content="2096">



<meta itemprop="keywords" content="linux,web," />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="压力测试工具 Siege 安装与使用"/>
<meta name="twitter:description" content="Siege 是Linux/Unix下的一个WEB系统的压力测试工具。


本文记录如何安装 Siege 以及基本使用方法介绍

"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">HuangYefei</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About</li>
      </a>
  </ul>
</nav>
  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">HuangYefei</a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">About</a>
      </li>
  </ul>
</nav>
    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">压力测试工具 Siege 安装与使用</h1>

      <div class="post-meta">
        <span class="post-time"> 2018-06-30 </span>
        <div class="post-category">
            
              <a href="/categories/linux/"> Linux </a>
            
          </div>
        <span class="more-meta"> 约 2096 字 </span>
        <span class="more-meta"> 预计阅读 5 分钟 </span>
        <span id="busuanzi_container_page_pv" class="more-meta"> <span id="busuanzi_value_page_pv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> 次阅读 </span>
      </div>
    </header>

    
    
<div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">文章目录</h2>
  
  <div class="post-toc-content">
    <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#1-下载与安装">1. 下载与安装</a>
<ul>
<li><a href="#1-1-参数说明">1.1 参数说明</a></li>
<li><a href="#1-2-使用说明">1.2 使用说明</a>
<ul>
<li><a href="#1-2-1-直接请求url">1.2.1 直接请求URL</a></li>
<li><a href="#1-2-2-随机选取urls-txt中列出所有的网址">1.2.2 随机选取urls.txt中列出所有的网址</a></li>
<li><a href="#1-2-3-json-格式参数-post-请求">1.2.3 json 格式参数 POST 请求</a></li>
</ul></li>
</ul></li>
<li><a href="#2-结果说明">2. 结果说明</a></li>
<li><a href="#3-使用实例">3. 使用实例</a>
<ul>
<li><a href="#3-1-关于concurrency参数的详解">3.1 关于Concurrency参数的详解</a></li>
</ul></li>
<li><a href="#4-文档和官方支持">4. 文档和官方支持</a></li>
</ul></li>
</ul>
</nav>
  </div>
</div>

    
    <div class="post-content">
      <p>Siege 是Linux/Unix下的一个WEB系统的压力测试工具。
<br>
<br>
本文记录如何安装 Siege 以及基本使用方法介绍</p>

<p></p>

<h2 id="1-下载与安装">1. 下载与安装</h2>

<p>下载地址: <a href="http://download.joedog.org/siege/">http://download.joedog.org/siege/</a></p>

<pre><code>$ wget http://download.joedog.org/siege/siege-latest.tar.gz
$ tar zxf siege-latest.tar.gz
$ cd siege-3.1.4/
$ ./configure
$ sudo make
$ sudo make install
</code></pre>

<p>查看是否安装成功</p>

<pre><code>查看siege安装路径:
$ which siege
/usr/local/bin/siege

查看siege版本:
$ siege -V
SIEGE 3.1.4
</code></pre>

<h3 id="1-1-参数说明">1.1 参数说明</h3>

<p>可以使用&rdquo;siege -h&rdquo;命令来查看帮助信息:</p>

<pre><code>SIEGE 3.1.4
Usage: siege [options]
       siege [options] URL
       siege -g URL
Options:
  -V, --version             VERSION, prints the version number.
  -h, --help                HELP, prints this section.
  -C, --config              CONFIGURATION, show the current config.
  -v, --verbose             VERBOSE, prints notification to screen.
  -q, --quiet               QUIET turns verbose off and suppresses output.
  -g, --get                 GET, pull down HTTP headers and display the
                            transaction. Great for application debugging.
  -c, --concurrent=NUM      CONCURRENT users, default is 10
  -i, --internet            INTERNET user simulation, hits URLs randomly.
  -b, --benchmark           BENCHMARK: no delays between requests.
  -t, --time=NUMm           TIMED testing where &quot;m&quot; is modifier S, M, or H
                            ex: --time=1H, one hour test.
  -r, --reps=NUM            REPS, number of times to run the test.
  -f, --file=FILE           FILE, select a specific URLS FILE.
  -R, --rc=FILE             RC, specify an siegerc file
  -l, --log[=FILE]          LOG to FILE. If FILE is not specified, the
                            default is used: PREFIX/var/siege.log
  -m, --mark=&quot;text&quot;         MARK, mark the log file with a string.
  -d, --delay=NUM           Time DELAY, random delay before each requst
                            between .001 and NUM. (NOT COUNTED IN STATS)
  -H, --header=&quot;text&quot;       Add a header to request (can be many)
  -A, --user-agent=&quot;text&quot;   Sets User-Agent in request
  -T, --content-type=&quot;text&quot; Sets Content-Type in request

Copyright (C) 2015 by Jeffrey Fulmer, et al.
This is free software; see the source for copying conditions.
There is NO warranty; not even for MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.
</code></pre>

<p>查看当前的配置信息</p>

<p><code>$ siege -C</code></p>

<h3 id="1-2-使用说明">1.2 使用说明</h3>

<h4 id="1-2-1-直接请求url">1.2.1 直接请求URL</h4>

<p><code>$ siege -c 20 -r 10 http://www.cnwytnet.com</code></p>

<p><strong>参数说明：</strong> -c 是并发量，并发数为20人 -r 是重复次数， 重复10次</p>

<h4 id="1-2-2-随机选取urls-txt中列出所有的网址">1.2.2 随机选取urls.txt中列出所有的网址</h4>

<p>在当前目录下创建一个名为&rdquo;urls-demo.txt&rdquo;的文件。 文件里边填写URL地址，可以有多条，每行一条，比如：</p>

<pre><code># URLs:
http://www.sogou.com/web?query=php&amp;from=wang_yong_tao
https://www.baidu.com/
</code></pre>

<p>执行请求命令</p>

<p><code>$ siege -c 5 -r 10 -f urls-demo.txt $ siege -c 5 -r 10 -f /Users/WangYoungTom/temp/urls-demo.txt</code></p>

<p><strong>参数说明：</strong> -c 是并发量，并发数为5人 -r 是重复次数， 重复10次 -f 指定使用文件，urls-demo.txt就是一个文本文件，每行都是一个url，会从里面随机访问的</p>

<p>Siege从Siege-V2.06起支持POST和GET两种请求方式。 如果想模拟POST请求，可以在urls-demo.txt中按照以下格式填写URL:</p>

<pre><code># URL （POST）:
http://wangtest.com/index.php POST UserId=XXX&amp;StartIndex=0&amp;OS=Android&amp;Sign=cff6wyt505wyt4c
http://wangtest.com/articles.php POST UserId=XXX&amp;StartIndex=0&amp;OS=iOS&amp;Sign=cff63w5905wyt4c
</code></pre>

<p>使用示例</p>

<pre><code class="language-bash">// 请求http://www.cnwytnet.com，并发人数为10，重复5次，每次请求间隔3秒
$ siege --concurrent=10 --reps=5 --delay=3 http://www.cnwytnet.com
$ siege -c 10 -r 5 -d 3 http://www.cnwytnet.com
</code></pre>

<h4 id="1-2-3-json-格式参数-post-请求">1.2.3 json 格式参数 POST 请求</h4>

<p>在当前目录下创建一个名为&rdquo;postfile.json&rdquo;的文件。 文件里边填写JSON格式的数据，如：</p>

<p><code>{&quot;username&quot;:&quot;admin&quot;,&quot;password&quot;:&quot;123456&quot;}</code></p>

<p>使用示例</p>

<pre><code class="language-bash">siege -c 20 -r 5 '10.1.1.1:80/login/ POST &lt;./postfile.json'
</code></pre>

<h2 id="2-结果说明">2. 结果说明</h2>

<blockquote>
<p>Transactions: 153 hits  (处理次数，本次处理了153此请求)
<br>
<br>
Availability: 100.00 % (可用性/成功次数的百分比,比如本次100%成功)
<br>
<br>
Elapsed time: 17.22 secs （运行时间，本次总消耗17.22秒）
<br>
<br>
Data transferred: 7.70 MB （数据传送量）
<br>
<br>
Response time: 0.17 secs （响应时间）
<br>
<br>
Transaction rate: 8.89 trans/sec (处理请求频率，每秒钟处理8.89次请求）
<br>
<br>
Throughput: 0.45 MB/sec （吞吐量,传输速度）
<br>
<br>
Concurrency: 1.54 (实际最高并发连接数)
<br>
<br>
Successful transactions: 153 (成功的传输次数)
<br>
<br>
Failed transactions: 0 (失败的传输次数)
<br>
<br>
Longest transaction: 0.70 (处理传输是所花的最长时间)
<br>
<br>
Shortest transaction: 0.02 (处理传输是所花的最短时间)</p>
</blockquote>

<h2 id="3-使用实例">3. 使用实例</h2>

<pre><code>$ siege -c 5 -r 10 http://www.baidu.com

Transactions:                386 hits
Availability:             100.00 %
Elapsed time:              37.40 secs
Data transferred:          19.47 MB
Response time:              0.43 secs
Transaction rate:          10.32 trans/sec
Throughput:             0.52 MB/sec
Concurrency:                4.45
Successful transactions:         386
Failed transactions:               0
Longest transaction:            2.38
Shortest transaction:           0.02
</code></pre>

<h3 id="3-1-关于concurrency参数的详解">3.1 关于Concurrency参数的详解</h3>

<p>以下摘录自Siege官网 <a href="https://www.joedog.org/2012/02/17/concurrency-single-siege/">Concurrency and the Single Siege</a></p>

<blockquote>
<p>We’re frequently asked about concurrency. When a siege is finished, one of its characteristics is “Concurrency” which is described with a decimal number. This stat is known to make eyebrows furl. People want to know, “What the hell does that mean?”
<br>
<br>
In computer science, concurrency is a trait of systems that handle two or more simultaneous processes. Those processes may be executed by multiple cores, processors or threads. From siege’s perspective, they may even be handled by separate nodes in a server cluster.
<br>
<br>
When the run is over, we try to infer how many processes, on average, were executed simultaneously the web server. The calculation is simple: total transactions divided by elapsed time. If we did 100 transactions in 10 seconds, then our concurrency was 10.00.
<br>
<br>
当运行结束时, 我们尝试推断平均有多少个进程同时在执行 web 服务。计算方式很简单: 总记录数除以耗费时间。比方说，如果我们在10秒内有100条记录，那么并发量将是10
<br>
<br>
Bigger is not always better
<br>
<br>
并发量并不是越大越好
<br>
<br>
Generally, web servers are prized for their ability to handle simultaneous connections. Maybe your benchmark run was 100 transactions in 10 seconds. Then you tuned your server and your final run was 100 transactions in five seconds. That is good. Concurrency rose as the elapsed time fell.
<br>
<br>
通常, web 服务器处理高并发连接的能力是其价值所在。也许你的基准运行是在10秒内100条事务。然后你调整了你的服务器, 你的最终运行是100条事务在5秒内完成。这样很棒, 随着耗时减少, 并发性上升。
<br>
<br>
But sometimes high concurrency is a trait of a poorly functioning website. The longer it takes to process a transaction, the more likely they are to queue.  When the queue swells, concurrency rises. The reasons for this rise can vary. An obvious cause is load.  If a server has more connections than thread handlers, requests are going to queue. Another is competence – poorly written apps can take longer to complete then well-written ones.
<br>
<br>
但有时高并发性是一个功能不良的网站的特点。处理事务所需的时间越长, 排队的可能性就越大。 当队列膨胀时, 并发会上升。这种上升的原因可能有所不同。一个明显的原因是负载。 如果服务器处理的连接比线程多, 则请求将排队。另一方面, 写得不好的应用程序需要更长的时间才能完成请求应答。
<br>
<br>
We can illustrate this point with an obvious example. I ran siege against a two-node clustered website. My concurrency was 6.97. Then I took a node away and ran the same run against the same page. My concurrency rose to 18.33. At the same time, my elapsed time was extended 65%.
<br>
<br>
我们可以用一个明显的例子来说明这一点。我对一个两节点的群集网站进行了围攻。我的并发是6.97。然后, 我移除了一个节点, 并运行同样的 siege 命令。我的并发上升到18.33。同时, 消耗的时间延长了65%。
<br>
<br>
Sweeping conclusions
<br>
<br>
Concurrency must be evaluated in context. If it rises while the elapsed time falls, then that’s a Good Thing™. But if rises while the elapsed time increases, then Not So Much™. When you reach the point where concurrency rises and elapsed time is extended, then it might be time to consider more capacity.
<br>
<br>
必须在上下文中计算并发。如果并发量上升时, 耗时减少, 那么这是一件好事。但如果并发量上升, 耗时也增加, 这可不是个好消息了。当您到达并发上升和耗时增多的临界点时, 则可能是考虑扩容的时候了。</p>
</blockquote>

<h2 id="4-文档和官方支持">4. 文档和官方支持</h2>

<p>官网  <a href="https://www.joedog.org/">https://www.joedog.org/</a></p>

<p>文档  <a href="https://www.joedog.org/siege-manual/#a01">https://www.joedog.org/siege-manual/#a01</a></p>
    </div>

    
    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">文章作者</span>
    <span class="item-content">honour</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">上次更新</span>
    <span class="item-content">2018-06-30</span>
  </p>
  
  
</div>

    
    

    <footer class="post-footer">
      <div class="post-tags">
          
          <a href="/tags/linux/">linux</a>
          
          <a href="/tags/web/">web</a>
          
        </div>

      
      <nav class="post-nav">
        
          <a class="prev" href="/post/linux/auto_start/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">如何在 Linux 启动时自动执行命令或脚本</span>
            <span class="prev-text nav-mobile">上一篇</span>
          </a>
        
          <a class="next" href="/post/python/flask_sqlalchemy/">
            <span class="next-text nav-default">Flask-SQLALchemy 基本方法教程</span>
            <span class="prev-text nav-mobile">下一篇</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        
  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="mailto:yefeihonours@gmail.com" class="iconfont icon-email" title="email"></a>
  <a href="https://yefeihonours.github.io/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    由 <a class="hexo-link" href="https://gohugo.io">Hugo</a> 强力驱动
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    主题 - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  <div class="busuanzi-footer">
    <span id="busuanzi_container_site_pv"> 本站总访问量 <span id="busuanzi_value_site_pv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> 次 </span>
    <span class="division">|</span>
    <span id="busuanzi_container_site_uv"> 本站总访客数 <span id="busuanzi_value_site_uv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> 人 </span>
  </div>

  <span class="copyright-year">
    &copy; 
    
      2017 - 
    2018
    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">huangyefei</span>
  </span>
</div>
    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
<script src="/lib/highlight/highlight.pack.js?v=20171001"></script><script type="text/javascript" src="/lib/jquery/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout-1.0.1.min.js"></script>
  
<script type="text/javascript" src="/dist/even.min.js?v=3.1.1"></script>








</body>
</html>
